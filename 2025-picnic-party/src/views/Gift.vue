<script setup>
  import { ref, onMounted, onUnmounted } from 'vue'
  import { Tooltip, Modal, Collapse, initTWE } from 'tw-elements'
  import { gsap } from 'gsap'
  import { ScrollTrigger } from 'gsap/ScrollTrigger'
  gsap.registerPlugin(ScrollTrigger)

  onMounted(() => {
    initTWE({ Tooltip, Modal, Collapse })
  })

  const giftList = [
    {
      name: 'ÊæéÊæÑÈ£ØÂ∫ó',
      image:
        'https://parenting.cwgv.com.tw/event/picnic/2024/assets/img/gift_p6.jpg',
      room: 'CookieRun ËñëÈ§Ö‰∫∫‰∏ªÈ°åÊàø',
      note: '(Âä†Ë¥à‰∏Ä‰Ωç12Ê≠≤‰ª•‰∏ãÂÖíÁ´•ÂÖ•‰Ωè+ÈñãÊàøÁ¶Æ)',
      description:
        '‰ªäÂπ¥ÊæéÊæÑÈ£ØÂ∫óÁâπÂà•ÊîúÊâãÈüìÂúã‰∫∫Ê∞£ÁõäÊô∫ÂÜíÈö™ÈÅäÊà≤CookieRunËñëÈ§Ö‰∫∫ÊâìÈÄ†Â∞àÂ±¨‰∏ªÈ°åÊàøÔºåÈô§‰∫ÜÊàøÂÖßËôïËôïÂÖÖÊªøCookieRunËñëÈ§Ö‰∫∫ÂÖÉÁ¥†ÔºåÂÖ®È§®ÈÇÑË®≠ÊúâÂ§öËôïÊãçÁÖßÊâìÂç°ÂçÄÔºå‰∏¶ËàâËæ¶ÂêÑÂºèÊ¥ªÂãïËàáÊàøÂÆ¢ÂÖ±Â∫¶Ê≠°Ê®ÇÊôÇÂÖâÔºå‰∏çÂÆπÈåØÈÅéÁöÑÁ≤æÂΩ©È´îÈ©óÁ≠â‰Ω†‰æÜÂèÉËàáÔºÅ(È£ØÂ∫óÊàøÂûãÁÖßÁâáÂÉÖ‰æõÂèÉËÄÉÔºå‰æùÂØ¶ÈöõÂÖ•‰ΩèÊàøÂûãÁÇ∫‰∏ª)',
      price: '$11,880 / 2Âêç'
    },
    {
      name: 'ÊæéÊæÑÈ£ØÂ∫ó',
      image:
        'https://parenting.cwgv.com.tw/event/picnic/2024/assets/img/gift_p6.jpg',
      room: 'CookieRun ËñëÈ§Ö‰∫∫‰∏ªÈ°åÊàø',
      note: '(Âä†Ë¥à‰∏Ä‰Ωç12Ê≠≤‰ª•‰∏ãÂÖíÁ´•ÂÖ•‰Ωè+ÈñãÊàøÁ¶Æ)',
      description:
        '‰ªäÂπ¥ÊæéÊæÑÈ£ØÂ∫óÁâπÂà•ÊîúÊâãÈüìÂúã‰∫∫Ê∞£ÁõäÊô∫ÂÜíÈö™ÈÅäÊà≤CookieRunËñëÈ§Ö‰∫∫ÊâìÈÄ†Â∞àÂ±¨‰∏ªÈ°åÊàøÔºåÈô§‰∫ÜÊàøÂÖßËôïËôïÂÖÖÊªøCookieRunËñëÈ§Ö‰∫∫ÂÖÉÁ¥†ÔºåÂÖ®È§®ÈÇÑË®≠ÊúâÂ§öËôïÊãçÁÖßÊâìÂç°ÂçÄÔºå‰∏¶ËàâËæ¶ÂêÑÂºèÊ¥ªÂãïËàáÊàøÂÆ¢ÂÖ±Â∫¶Ê≠°Ê®ÇÊôÇÂÖâÔºå‰∏çÂÆπÈåØÈÅéÁöÑÁ≤æÂΩ©È´îÈ©óÁ≠â‰Ω†‰æÜÂèÉËàáÔºÅ(È£ØÂ∫óÊàøÂûãÁÖßÁâáÂÉÖ‰æõÂèÉËÄÉÔºå‰æùÂØ¶ÈöõÂÖ•‰ΩèÊàøÂûãÁÇ∫‰∏ª)',
      price: '$11,880 / 2Âêç'
    },
    {
      name: 'ÊæéÊæÑÈ£ØÂ∫ó',
      image:
        'https://parenting.cwgv.com.tw/event/picnic/2024/assets/img/gift_p6.jpg',
      room: 'CookieRun ËñëÈ§Ö‰∫∫‰∏ªÈ°åÊàø',
      note: '(Âä†Ë¥à‰∏Ä‰Ωç12Ê≠≤‰ª•‰∏ãÂÖíÁ´•ÂÖ•‰Ωè+ÈñãÊàøÁ¶Æ)',
      description:
        '‰ªäÂπ¥ÊæéÊæÑÈ£ØÂ∫óÁâπÂà•ÊîúÊâãÈüìÂúã‰∫∫Ê∞£ÁõäÊô∫ÂÜíÈö™ÈÅäÊà≤CookieRunËñëÈ§Ö‰∫∫ÊâìÈÄ†Â∞àÂ±¨‰∏ªÈ°åÊàøÔºåÈô§‰∫ÜÊàøÂÖßËôïËôïÂÖÖÊªøCookieRunËñëÈ§Ö‰∫∫ÂÖÉÁ¥†ÔºåÂÖ®È§®ÈÇÑË®≠ÊúâÂ§öËôïÊãçÁÖßÊâìÂç°ÂçÄÔºå‰∏¶ËàâËæ¶ÂêÑÂºèÊ¥ªÂãïËàáÊàøÂÆ¢ÂÖ±Â∫¶Ê≠°Ê®ÇÊôÇÂÖâÔºå‰∏çÂÆπÈåØÈÅéÁöÑÁ≤æÂΩ©È´îÈ©óÁ≠â‰Ω†‰æÜÂèÉËàáÔºÅ(È£ØÂ∫óÊàøÂûãÁÖßÁâáÂÉÖ‰æõÂèÉËÄÉÔºå‰æùÂØ¶ÈöõÂÖ•‰ΩèÊàøÂûãÁÇ∫‰∏ª)',
      price: '$11,880 / 2Âêç'
    },
    {
      name: 'ÊæéÊæÑÈ£ØÂ∫ó',
      image:
        'https://parenting.cwgv.com.tw/event/picnic/2024/assets/img/gift_p6.jpg',
      room: 'CookieRun ËñëÈ§Ö‰∫∫‰∏ªÈ°åÊàø',
      note: '(Âä†Ë¥à‰∏Ä‰Ωç12Ê≠≤‰ª•‰∏ãÂÖíÁ´•ÂÖ•‰Ωè+ÈñãÊàøÁ¶Æ)',
      description:
        '‰ªäÂπ¥ÊæéÊæÑÈ£ØÂ∫óÁâπÂà•ÊîúÊâãÈüìÂúã‰∫∫Ê∞£ÁõäÊô∫ÂÜíÈö™ÈÅäÊà≤CookieRunËñëÈ§Ö‰∫∫ÊâìÈÄ†Â∞àÂ±¨‰∏ªÈ°åÊàøÔºåÈô§‰∫ÜÊàøÂÖßËôïËôïÂÖÖÊªøCookieRunËñëÈ§Ö‰∫∫ÂÖÉÁ¥†ÔºåÂÖ®È§®ÈÇÑË®≠ÊúâÂ§öËôïÊãçÁÖßÊâìÂç°ÂçÄÔºå‰∏¶ËàâËæ¶ÂêÑÂºèÊ¥ªÂãïËàáÊàøÂÆ¢ÂÖ±Â∫¶Ê≠°Ê®ÇÊôÇÂÖâÔºå‰∏çÂÆπÈåØÈÅéÁöÑÁ≤æÂΩ©È´îÈ©óÁ≠â‰Ω†‰æÜÂèÉËàáÔºÅ(È£ØÂ∫óÊàøÂûãÁÖßÁâáÂÉÖ‰æõÂèÉËÄÉÔºå‰æùÂØ¶ÈöõÂÖ•‰ΩèÊàøÂûãÁÇ∫‰∏ª)',
      price: '$11,880 / 2Âêç'
    },
    {
      name: 'ÊæéÊæÑÈ£ØÂ∫ó',
      image:
        'https://parenting.cwgv.com.tw/event/picnic/2024/assets/img/gift_p6.jpg',
      room: 'CookieRun ËñëÈ§Ö‰∫∫‰∏ªÈ°åÊàø',
      note: '(Âä†Ë¥à‰∏Ä‰Ωç12Ê≠≤‰ª•‰∏ãÂÖíÁ´•ÂÖ•‰Ωè+ÈñãÊàøÁ¶Æ)',
      description:
        '‰ªäÂπ¥ÊæéÊæÑÈ£ØÂ∫óÁâπÂà•ÊîúÊâãÈüìÂúã‰∫∫Ê∞£ÁõäÊô∫ÂÜíÈö™ÈÅäÊà≤CookieRunËñëÈ§Ö‰∫∫ÊâìÈÄ†Â∞àÂ±¨‰∏ªÈ°åÊàøÔºåÈô§‰∫ÜÊàøÂÖßËôïËôïÂÖÖÊªøCookieRunËñëÈ§Ö‰∫∫ÂÖÉÁ¥†ÔºåÂÖ®È§®ÈÇÑË®≠ÊúâÂ§öËôïÊãçÁÖßÊâìÂç°ÂçÄÔºå‰∏¶ËàâËæ¶ÂêÑÂºèÊ¥ªÂãïËàáÊàøÂÆ¢ÂÖ±Â∫¶Ê≠°Ê®ÇÊôÇÂÖâÔºå‰∏çÂÆπÈåØÈÅéÁöÑÁ≤æÂΩ©È´îÈ©óÁ≠â‰Ω†‰æÜÂèÉËàáÔºÅ(È£ØÂ∫óÊàøÂûãÁÖßÁâáÂÉÖ‰æõÂèÉËÄÉÔºå‰æùÂØ¶ÈöõÂÖ•‰ΩèÊàøÂûãÁÇ∫‰∏ª)',
      price: '$11,880 / 2Âêç'
    },
    {
      name: 'ÊæéÊæÑÈ£ØÂ∫ó',
      image:
        'https://parenting.cwgv.com.tw/event/picnic/2024/assets/img/gift_p6.jpg',
      room: 'CookieRun ËñëÈ§Ö‰∫∫‰∏ªÈ°åÊàø',
      note: '(Âä†Ë¥à‰∏Ä‰Ωç12Ê≠≤‰ª•‰∏ãÂÖíÁ´•ÂÖ•‰Ωè+ÈñãÊàøÁ¶Æ)',
      description:
        '‰ªäÂπ¥ÊæéÊæÑÈ£ØÂ∫óÁâπÂà•ÊîúÊâãÈüìÂúã‰∫∫Ê∞£ÁõäÊô∫ÂÜíÈö™ÈÅäÊà≤CookieRunËñëÈ§Ö‰∫∫ÊâìÈÄ†Â∞àÂ±¨‰∏ªÈ°åÊàøÔºåÈô§‰∫ÜÊàøÂÖßËôïËôïÂÖÖÊªøCookieRunËñëÈ§Ö‰∫∫ÂÖÉÁ¥†ÔºåÂÖ®È§®ÈÇÑË®≠ÊúâÂ§öËôïÊãçÁÖßÊâìÂç°ÂçÄÔºå‰∏¶ËàâËæ¶ÂêÑÂºèÊ¥ªÂãïËàáÊàøÂÆ¢ÂÖ±Â∫¶Ê≠°Ê®ÇÊôÇÂÖâÔºå‰∏çÂÆπÈåØÈÅéÁöÑÁ≤æÂΩ©È´îÈ©óÁ≠â‰Ω†‰æÜÂèÉËàáÔºÅ(È£ØÂ∫óÊàøÂûãÁÖßÁâáÂÉÖ‰æõÂèÉËÄÉÔºå‰æùÂØ¶ÈöõÂÖ•‰ΩèÊàøÂûãÁÇ∫‰∏ª)',
      price: '$11,880 / 2Âêç'
    }
  ]

  const setFaqListItem = () => {
    const items = document.querySelectorAll('#accordionContainer > div')
    gsap.from(items, {
      scrollTrigger: {
        trigger: '#accordionContainer', // Êï¥ÂÄãÂÆπÂô®‰ΩúÁÇ∫Ëß∏ÁôºÈªû
        start: 'top 85%', // ÂÆπÂô®ÈÄ≤ÂÖ•Ë¶ñÁ™ó 85% ÈñãÂßãÂãïÁï´
        toggleActions: 'play none none none' // ÊªæÂãïÊôÇÊí≠Êîæ‰∏ÄÊ¨°
      },
      opacity: 0, // ÂàùÂßãÈÄèÊòéÂ∫¶
      y: 50, // ÂàùÂßãÂêë‰∏ãÂÅèÁßª
      duration: 0.8, // ÂñÆÂÄãÂãïÁï´ÊôÇÈñì
      ease: 'power3.out', // Âπ≥ÊªëÊïàÊûú
      stagger: {
        each: 0.3, // ÊØèÂÄãÈ†ÖÁõÆ‰πãÈñìÈñìÈöî 300ms
        from: 'start' // ÂæûÁ¨¨‰∏ÄÂÄãÈñãÂßã‰æùÂ∫èÈ°ØÁ§∫
      }
    })
  }

  const setGiftListItem = () => {
    const items = document.querySelectorAll('.gift-item')

    // üìå 1. ÊªëÂÖ•Áï´Èù¢ÊôÇÔºåÊâÄÊúâ item ‰æùÂ∫èÁî±‰∏ãËÄå‰∏äÊ∑°ÂÖ•
    gsap.from(items, {
      scrollTrigger: {
        trigger: '.grid', // ÂÆπÂô®‰ΩúÁÇ∫Ëß∏ÁôºÈªû
        start: 'top 85%', // ÈÄ≤ÂÖ•Ë¶ñÁ™ó 85% ÈñãÂßãÂãïÁï´
        toggleActions: 'play none none none' // Âè™Êí≠Êîæ‰∏ÄÊ¨°
      },
      opacity: 0,
      y: 50,
      duration: 0.8,
      ease: 'power3.out',
      stagger: {
        each: 0.3, // ÊØèÂÄãÈ†ÖÁõÆÂª∂ÈÅ≤ 300ms
        from: 'start'
      }
    })

    // 2. ÂñÆ‰∏Ä item ÊªëÂÖ•ÊôÇÂΩàË∑≥ÊîæÂ§ßÁ∏ÆÂ∞èÊïàÊûú
    items.forEach((item) => {
      gsap.to(item, {
        scale: 1.05, // ËºïÂæÆÊîæÂ§ß
        duration: 0.8,
        ease: 'bounce.inOut', // ÂΩàÊÄßÊïàÊûú
        repeat: -1, // ÁÑ°ÈôêÂæ™Áí∞
        yoyo: true, // ‰æÜÂõûÊïàÊûú
        paused: true // È†êË®≠Êö´ÂÅú
      })

      item.addEventListener('mouseenter', () => {
        gsap.to(item, { scale: 1.05, duration: 0.3, ease: 'power1.out' })
      })

      item.addEventListener('mouseleave', () => {
        gsap.to(item, { scale: 1, duration: 0.3, ease: 'power1.out' })
      })
    })
  }
  onMounted(() => {
    setFaqListItem()
    setGiftListItem()
  })
</script>

<template>
  <div>
    <Header />
    <div class="container">
      <div class="grid grid-cols-2 gap-10 md:grid-cols-3">
        <div v-for="(item, index) in giftList" :key="index" class="gift-item">
          <div class="relative my-6 flex flex-col rounded-lg">
            <div class="relative mb-3 overflow-hidden rounded-md text-white">
              <img :src="item.image" alt="w-full" />
            </div>
            <div>
              <h2 class="mb-2 text-xl font-semibold">
                {{ item.name }}
              </h2>
              <div class="mb-3">
                {{ item.note }}
              </div>
              <div class="font-light leading-normal text-slate-600">
                {{ item.description }}
              </div>
              <div class="text-center text-xl font-bold text-primary-500">
                {{ item.price }}
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="container py-10">
        <div
          class="relative grid divide-x divide-white rounded-xl bg-primary-500 p-8 md:grid-cols-2"
        >
          <span
            class="bg-kv-yellow absolute -top-5 start-5 inline-block rounded-tr-3xl py-2 pe-5 ps-6 text-2xl font-bold tracking-wide"
          >
            Â†±ÂêçÈÄÅÁ¶èË¢ã
          </span>
          <div class="text-center">
            <img src="/img/gift-intro-07.svg" alt="" />
          </div>
          <div class="text-center">
            <img src="/img/gift-intro-08.svg" alt="" />
          </div>
        </div>
      </div>
    </div>
  </div>
</template>
